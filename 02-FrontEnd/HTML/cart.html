<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>CoffeeStar - Cart</title>
    <link rel="stylesheet" href="CSS/style-c.css" />
</head>
<body>
    <div class="container">
        <!-- Navigation -->
        <nav class="navbar">
            <a href="start.html">Start</a>
            <a href="menu.html">Menu</a>
            <a href="cart.html">Cart</a>
            <a href="about.html">About</a>
            <img src="img/logo.jpg" alt="Logo" class="nav-logo" />
        </nav>

        <!-- Cart Content -->
        <div class="content">
            <!-- Left Side -->
            <div class="left">
                <div class="logo-Area">
                <img src="img/logo.jpg" alt="Logo" class="Page-logo" />
                </div>
                <div class="Account">
                    <div class="Payment-methode">
                        <label><input type="radio" name="payment" value="paypal" /> PayPal</label><br/>
                        <label><input type="radio" name="payment" value="creditcard" /> Credit Card</label>
                    </div>
                    <div class="Account-Info">
                        <p>Username: </p>
                        <p>E-Mail: </p>
                        <p>Points: </p>
                    </div>
                </div>
            </div>

            <!-- Right Side -->
            <div class="right">
                <h1>Cart</h1>

                <div id="cart-items-container">
                    <!-- Falls leer: -->
                    <p id="empty-cart-text">Nothing to see here yet.</p>
                    <p class="empty-cart-text"> Visit the <a href="menu.html">menu</a> to add more Items.</p>
                </div>

                <!-- Payment Form -->
                <div class="Payment">
                    <div id="paypal-box" style="display: none;">
                        <h3>Pay with PayPal</h3>
                        <label>E-Mail: <input type="email" /></label><br />
                        <label>Password: <input type="password" /></label>
                    </div>

                    <div id="creditcard-box" style="display: none;">
                        <h3>Pay with Credit Card</h3>
                        <label>Name: <input type="text" /></label><br />
                        <label>Card Number: <input type="text" /></label><br />
                        <label>CCV: <input type="text" maxlength="4" /></label>
                    </div>
                </div>
            </div>
        </div>

        <!-- Contact -->
        <div class="contact-box">
            <p>Contact us at: CoffeStar@bapfit.de | Phone: +123 456 7890</p>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        // Beispiel-Daten (simuliert lokale Speicherung vom Menü)
        const cartItems = JSON.parse(localStorage.getItem('cartItems')) || [
            {
                name: 'Caramel Latte',
                description: 'Rich espresso with caramel syrup',
                img: 'img/latte.jpg',
                amount: 2
            },
            {
                name: 'Espresso',
                description: 'Strong and bold',
                img: 'img/espresso.jpg',
                amount: 1
            }
        ];

        const cartContainer = document.getElementById('cart-items-container');
        const emptyCartText = document.getElementById('empty-cart-text');

        function displayCart() {
            // Clear previous items
            cartContainer.innerHTML = '';

             if (cartItems.length === 0) {
                cartContainer.innerHTML = `
                    <p id="empty-cart-text">Nothing to see here yet.</p>
                    <p class="empty-cart-text"> Visit the <a href="menu.html">menu</a> to add more Items.</p>
                `;
                return;
            }

            cartItems.forEach(item => {
                const div = document.createElement('div');
                div.className = 'cart-item';
                div.innerHTML = `
                    <div class="look">
                        <img src="${item.img}" alt="${item.name}" class="item" />
                        <p>${item.description}</p>
                    </div>
                    <div>
                        <p><strong>${item.name}</strong></p>
                        <p>${item.description}</p>
                        <label>Amount: 
                            <input type="number" value="${item.amount}" min="0" />
                        </label>
                        <button onclick="removeItem('${item.name}')">Remove</button>
                    </div>
                `;
                cartContainer.appendChild(div);
            });
        }

        // Umschalten Zahlungsboxen
        document.querySelectorAll('input[name="payment"]').forEach(radio => {
            radio.addEventListener('change', e => {
                document.getElementById('paypal-box').style.display =
                    e.target.value === 'paypal' ? 'block' : 'none';
                document.getElementById('creditcard-box').style.display =
                    e.target.value === 'creditcard' ? 'block' : 'none';
            });
        });

        displayCart();


        // Function to load cart from localStorage and display items
        function loadCart() {
            const cartContainer = document.getElementById('cart-items-container');
            let cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];

            cartContainer.innerHTML = ''; // Inhalt löschen

            if (cartItems.length === 0) {
                // Wenn leer, Zeige Nachricht
                cartContainer.innerHTML = `
                    <p id="empty-cart-text">Nichts im Warenkorb. Besuche das <a href="menu.html">Menu</a>, um Artikel hinzuzufügen.</p>
                `;
                return;
            }

            // Event Listener für Menge ändern
            document.querySelectorAll('.amount-input').forEach(input => {
                input.addEventListener('change', e => {
                    let newAmount = parseInt(e.target.value);
                    const idx = e.target.dataset.index;
                    if (isNaN(newAmount) || newAmount < 0) {
                        e.target.value = cartItems[idx].amount;
                        return;
                    }

                    if (newAmount === 0) {
                        // Menge 0 = entfernen
                        removeItem(idx);
                    } else {
                        cartItems[idx].amount = newAmount;
                        localStorage.setItem('cartItems', JSON.stringify(cartItems));
                    }
                });
            });

            // Event Listener für Entfernen
            document.querySelectorAll('.remove-btn').forEach(btn => {
                btn.addEventListener('click', e => {
                    const idx = e.target.dataset.index;
                    removeItem(idx);
                });
            });
        }

        // Artikel entfernen
        function removeItem(index) {
            let cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];
            cartItems.splice(index, 1);
            localStorage.setItem('cartItems', JSON.stringify(cartItems));
            loadCart();
        }

        window.addEventListener('DOMContentLoaded', loadCart);




    </script>
</body>
</html>
